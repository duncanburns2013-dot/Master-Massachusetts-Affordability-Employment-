<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Massachusetts Economic Crisis | Interactive Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--bg:#050508;--surface:rgba(255,255,255,0.02);--glass:rgba(255,255,255,0.05);--border:rgba(255,255,255,0.08);--text:#fff;--muted:rgba(255,255,255,0.6);--dim:rgba(255,255,255,0.3);--red:#ff2d55;--red-glow:rgba(255,45,85,0.5);--cyan:#00d4ff;--cyan-glow:rgba(0,212,255,0.5);--green:#32d74b;--yellow:#ffd60a;--purple:#bf5af2;--orange:#ff9f0a}
        html{scroll-behavior:smooth}
        body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);overflow-x:hidden;line-height:1.5}
        
        /* PARTICLE CANVAS */
        #particles{position:fixed;inset:0;z-index:0;pointer-events:none}
        
        /* MOUSE GLOW */
        .mouse-glow{position:fixed;width:600px;height:600px;border-radius:50%;pointer-events:none;z-index:1;background:radial-gradient(circle,rgba(255,45,85,0.15),transparent 60%);transform:translate(-50%,-50%);transition:opacity 0.3s;opacity:0}
        .mouse-glow.active{opacity:1}
        
        /* MESH BG */
        .mesh-bg{position:fixed;inset:0;z-index:0;overflow:hidden}
        .mesh-bg::before{content:'';position:absolute;inset:-50%;background:radial-gradient(circle at 20% 30%,rgba(255,45,85,0.12) 0%,transparent 40%),radial-gradient(circle at 80% 70%,rgba(0,212,255,0.1) 0%,transparent 40%),radial-gradient(circle at 50% 50%,rgba(191,90,242,0.06) 0%,transparent 50%);animation:meshMove 30s ease-in-out infinite}
        @keyframes meshMove{0%,100%{transform:translate(0,0) rotate(0deg)}50%{transform:translate(3%,-3%) rotate(2deg)}}
        
        .grain{position:fixed;inset:0;z-index:1;pointer-events:none;opacity:0.025;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E")}
        
        .wrap{position:relative;z-index:10}
        .container{max-width:1440px;margin:0 auto;padding:0 40px}
        @media(max-width:600px){.container{padding:0 20px}}

        /* SCROLL ANIMATIONS */
        .reveal{opacity:0;transform:translateY(60px);transition:all 1s cubic-bezier(0.23,1,0.32,1)}
        .reveal.visible{opacity:1;transform:translateY(0)}
        .reveal-left{opacity:0;transform:translateX(-60px);transition:all 1s cubic-bezier(0.23,1,0.32,1)}
        .reveal-left.visible{opacity:1;transform:translateX(0)}
        .reveal-scale{opacity:0;transform:scale(0.8);transition:all 1s cubic-bezier(0.23,1,0.32,1)}
        .reveal-scale.visible{opacity:1;transform:scale(1)}

        /* HERO */
        .hero{min-height:100vh;display:flex;align-items:center;padding:120px 0;position:relative}
        .hero-content{max-width:900px}
        
        .badge{display:inline-flex;align-items:center;gap:10px;padding:10px 20px;background:linear-gradient(135deg,rgba(255,45,85,0.15),rgba(255,45,85,0.05));border:1px solid rgba(255,45,85,0.3);border-radius:100px;margin-bottom:40px;cursor:pointer;transition:all 0.4s}
        .badge:hover{transform:scale(1.05);box-shadow:0 0 40px rgba(255,45,85,0.3)}
        .badge-dot{width:8px;height:8px;background:var(--red);border-radius:50%;animation:blink 1.5s ease-in-out infinite}
        @keyframes blink{0%,100%{opacity:1;box-shadow:0 0 20px var(--red-glow)}50%{opacity:0.5;box-shadow:0 0 5px var(--red-glow)}}
        .badge span{font-size:11px;font-weight:700;letter-spacing:0.2em;text-transform:uppercase;color:var(--red)}
        
        .hero h1{font-size:clamp(48px,10vw,120px);font-weight:900;line-height:1;letter-spacing:-0.03em;margin-bottom:32px}
        .hero h1 .line{display:block}
        .hero h1 .line span{display:inline-block;animation:fadeIn 1s cubic-bezier(0.23,1,0.32,1) both}
        .hero h1 .line:nth-child(2) span{animation-delay:0.1s}
        .hero h1 .gradient{background:linear-gradient(135deg,#ff2d55 0%,#ff6b8a 30%,#00d4ff 70%,#32d74b 100%);background-size:200% 200%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:gradientShift 8s ease infinite}
        @keyframes gradientShift{0%,100%{background-position:0% 50%}50%{background-position:100% 50%}}
        
        .hero-sub{font-size:20px;color:var(--muted);max-width:600px;margin-bottom:60px;opacity:0;animation:fadeIn 1s ease 0.3s both}
        @keyframes fadeIn{to{opacity:1}}

        /* HERO STATS */
        .hero-stats{display:grid;grid-template-columns:repeat(5,1fr);gap:16px;align-items:stretch}
        @media(max-width:1200px){.hero-stats{grid-template-columns:repeat(3,1fr)}}
        @media(max-width:800px){.hero-stats{grid-template-columns:repeat(2,1fr)}}
        @media(max-width:500px){.hero-stats{grid-template-columns:1fr}}
        
        .hero-stat{background:var(--glass);backdrop-filter:blur(20px);border:1px solid var(--border);border-radius:24px;padding:24px 20px;position:relative;overflow:visible;transition:all 0.5s cubic-bezier(0.23,1,0.32,1);cursor:pointer;opacity:0;animation:fadeUp 0.8s ease both;display:flex;flex-direction:column;min-height:200px}
        .hero-stat:nth-child(1){animation-delay:0.4s}
        .hero-stat:nth-child(2){animation-delay:0.5s}
        .hero-stat:nth-child(3){animation-delay:0.6s}
        .hero-stat:nth-child(4){animation-delay:0.7s}
        .hero-stat:nth-child(5){animation-delay:0.8s}
        @keyframes fadeUp{from{opacity:0;transform:translateY(40px)}to{opacity:1;transform:translateY(0)}}
        
        .hero-stat::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,45,85,0.1),transparent 50%);opacity:0;transition:opacity 0.5s}
        .hero-stat::after{content:'';position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,transparent,var(--red),transparent);opacity:0;transition:opacity 0.5s}
        .hero-stat:hover{transform:translateY(-8px) scale(1.02);border-color:rgba(255,45,85,0.4);box-shadow:0 40px 80px -20px rgba(0,0,0,0.5),0 0 40px rgba(255,45,85,0.1)}
        .hero-stat:hover::before,.hero-stat:hover::after{opacity:1}
        
        .stat-icon{font-size:32px;margin-bottom:16px;transition:transform 0.5s}
        .hero-stat:hover .stat-icon{transform:scale(1.2) rotate(10deg)}
        .stat-label{font-size:11px;font-weight:700;letter-spacing:0.1em;text-transform:uppercase;color:var(--muted);margin-bottom:8px;min-height:28px}
        .stat-value{font-family:'JetBrains Mono',monospace;font-size:clamp(32px,4vw,44px);font-weight:700;line-height:1.1;margin-bottom:8px;word-break:keep-all;white-space:nowrap}
        .stat-value.red{color:var(--red);text-shadow:0 0 40px var(--red-glow)}
        .stat-value.cyan{color:var(--cyan);text-shadow:0 0 40px var(--cyan-glow)}
        .stat-sub{font-size:13px;color:var(--dim);line-height:1.3}
        
        /* TOOLTIP */
        .tooltip{position:absolute;bottom:100%;left:50%;transform:translateX(-50%) translateY(10px);background:rgba(0,0,0,0.9);backdrop-filter:blur(20px);border:1px solid var(--border);border-radius:12px;padding:16px 20px;font-size:13px;color:var(--text);white-space:nowrap;opacity:0;visibility:hidden;transition:all 0.3s;z-index:100;pointer-events:none}
        .tooltip::after{content:'';position:absolute;top:100%;left:50%;transform:translateX(-50%);border:8px solid transparent;border-top-color:rgba(0,0,0,0.9)}
        .hero-stat:hover .tooltip{opacity:1;visibility:visible;transform:translateX(-50%) translateY(-10px)}

        /* NAV */
        .nav{position:sticky;top:0;z-index:100;padding:20px 0;background:rgba(5,5,8,0.8);backdrop-filter:blur(30px);border-bottom:1px solid var(--border)}
        .nav-inner{display:flex;gap:8px;overflow-x:auto;scrollbar-width:none;padding:4px}
        .nav-inner::-webkit-scrollbar{display:none}
        
        .nav-btn{padding:14px 28px;background:transparent;border:1px solid var(--border);color:var(--muted);border-radius:100px;font-family:inherit;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.4s cubic-bezier(0.23,1,0.32,1);white-space:nowrap;position:relative;overflow:hidden}
        .nav-btn:hover{border-color:var(--muted);color:var(--text);transform:scale(1.05)}
        .nav-btn.active{border-color:transparent;color:var(--text);background:linear-gradient(135deg,var(--red),var(--purple));box-shadow:0 8px 32px rgba(255,45,85,0.3)}

        /* SECTIONS */
        .section{display:none;padding:100px 0}
        .section.active{display:block}
        
        .section-head{margin-bottom:64px;max-width:700px}
        .section-head h2{font-size:clamp(40px,6vw,72px);font-weight:800;letter-spacing:-0.03em;margin-bottom:20px;line-height:1.1}
        .section-head p{font-size:18px;color:var(--muted);line-height:1.7}

        /* CARDS */
        .card-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:48px}
        @media(max-width:1100px){.card-grid{grid-template-columns:repeat(2,1fr)}}
        @media(max-width:600px){.card-grid{grid-template-columns:1fr}}
        
        .card{background:var(--glass);backdrop-filter:blur(20px);border:1px solid var(--border);border-radius:28px;padding:36px;transition:all 0.5s cubic-bezier(0.23,1,0.32,1);position:relative;overflow:hidden;cursor:pointer}
        .card::before{content:'';position:absolute;inset:-1px;background:linear-gradient(135deg,var(--red),var(--cyan));border-radius:28px;opacity:0;z-index:-1;transition:opacity 0.5s}
        .card:hover{transform:translateY(-12px) rotateX(5deg);box-shadow:0 60px 120px -30px rgba(0,0,0,0.5),0 0 60px rgba(255,45,85,0.08)}
        .card:hover::before{opacity:0.15}
        .card:hover .card-value{transform:scale(1.1)}
        
        .card-label{font-size:11px;font-weight:700;letter-spacing:0.15em;text-transform:uppercase;color:var(--muted);margin-bottom:16px}
        .card-value{font-family:'JetBrains Mono',monospace;font-size:56px;font-weight:700;line-height:1;margin-bottom:12px;transition:transform 0.5s}
        .card-value.red{color:var(--red)}
        .card-value.green{color:var(--green)}
        .card-value.yellow{color:var(--yellow)}
        .card-sub{font-size:14px;color:var(--dim)}
        .card-tag{display:inline-flex;align-items:center;gap:6px;margin-top:20px;padding:8px 16px;border-radius:100px;font-size:12px;font-weight:700}
        .card-tag.bad{background:rgba(255,45,85,0.15);color:var(--red)}
        .card-tag.good{background:rgba(50,215,75,0.15);color:var(--green)}
        
        /* EXPANDABLE DETAIL */
        .card-detail{max-height:0;overflow:hidden;transition:max-height 0.5s ease,padding 0.5s ease;padding:0 0;margin-top:0;border-top:0 solid var(--border)}
        .card.expanded .card-detail{max-height:200px;padding:20px 0 0;margin-top:20px;border-top-width:1px}
        .card-detail p{font-size:13px;color:var(--muted);line-height:1.6}
        .card-expand{position:absolute;bottom:12px;right:12px;width:28px;height:28px;border-radius:50%;background:var(--surface);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:14px;transition:all 0.3s}
        .card:hover .card-expand{background:var(--red);border-color:var(--red)}
        .card.expanded .card-expand{transform:rotate(45deg)}

        /* MEGA CALLOUT */
        .mega{position:relative;padding:80px;border-radius:48px;background:linear-gradient(135deg,rgba(255,45,85,0.08),rgba(0,212,255,0.05));border:1px solid rgba(255,45,85,0.2);margin-bottom:64px;overflow:hidden}
        .mega::before{content:'';position:absolute;width:800px;height:800px;top:-400px;right:-300px;background:radial-gradient(circle,rgba(255,45,85,0.15),transparent 60%);animation:megaPulse 10s ease-in-out infinite}
        @keyframes megaPulse{0%,100%{opacity:0.5;transform:scale(1)}50%{opacity:1;transform:scale(1.1)}}
        
        .mega-inner{position:relative;z-index:2;display:grid;grid-template-columns:1.5fr 1fr;gap:80px;align-items:center}
        @media(max-width:1000px){.mega{padding:48px}.mega-inner{grid-template-columns:1fr;gap:48px}}
        
        .mega-label{font-size:12px;font-weight:700;letter-spacing:0.2em;text-transform:uppercase;color:var(--red);margin-bottom:20px}
        .mega-value{font-family:'JetBrains Mono',monospace;font-size:clamp(64px,12vw,120px);font-weight:800;line-height:1;margin-bottom:24px;background:linear-gradient(135deg,#fff,rgba(255,255,255,0.6));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
        .mega-desc{font-size:20px;color:var(--muted);line-height:1.6}
        
        .mega-box{background:rgba(0,0,0,0.4);backdrop-filter:blur(20px);border:1px solid var(--border);border-radius:32px;padding:40px}
        .mega-box-value{font-family:'JetBrains Mono',monospace;font-size:48px;font-weight:700;margin:12px 0}
        .mega-box hr{border:none;height:1px;background:var(--border);margin:24px 0}

        /* INTERACTIVE TIMELINE */
        .timeline-box{background:var(--glass);backdrop-filter:blur(20px);border:1px solid var(--border);border-radius:32px;padding:40px;margin-bottom:48px}
        .timeline-box h3{font-size:16px;font-weight:700;margin-bottom:24px}
        .timeline-slider{position:relative;margin:40px 0 20px}
        .timeline-track{height:4px;background:rgba(255,255,255,0.1);border-radius:100px;position:relative}
        .timeline-fill{position:absolute;left:0;top:0;height:100%;background:linear-gradient(90deg,var(--red),var(--cyan));border-radius:100px;transition:width 0.3s}
        .timeline-thumb{position:absolute;top:50%;transform:translate(-50%,-50%);width:24px;height:24px;background:var(--text);border-radius:50%;cursor:grab;box-shadow:0 0 20px rgba(255,255,255,0.5);transition:transform 0.2s}
        .timeline-thumb:hover{transform:translate(-50%,-50%) scale(1.2)}
        .timeline-thumb:active{cursor:grabbing}
        .timeline-labels{display:flex;justify-content:space-between;margin-top:16px}
        .timeline-labels span{font-size:12px;color:var(--muted);cursor:pointer;transition:color 0.3s}
        .timeline-labels span:hover,.timeline-labels span.active{color:var(--text)}
        .timeline-display{text-align:center;margin-bottom:24px}
        .timeline-year{font-family:'JetBrains Mono',monospace;font-size:64px;font-weight:700;color:var(--cyan)}
        .timeline-stats{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-top:32px}
        .timeline-stat{text-align:center;padding:20px;background:var(--surface);border-radius:16px}
        .timeline-stat-label{font-size:11px;font-weight:600;color:var(--muted);text-transform:uppercase;letter-spacing:0.1em}
        .timeline-stat-value{font-family:'JetBrains Mono',monospace;font-size:32px;font-weight:700;margin-top:8px;transition:all 0.3s}

        /* CHART BOXES */
        .chart-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:32px;margin-bottom:48px}
        @media(max-width:900px){.chart-grid{grid-template-columns:1fr}}
        
        .chart-box{background:var(--glass);backdrop-filter:blur(20px);border:1px solid var(--border);border-radius:32px;padding:40px;transition:all 0.4s}
        .chart-box:hover{border-color:rgba(255,255,255,0.15)}
        .chart-box h3{font-size:16px;font-weight:700;margin-bottom:32px}
        .chart-wrap{height:320px}

        /* ALERT */
        .alert{background:linear-gradient(135deg,rgba(255,159,10,0.08),rgba(255,159,10,0.02));border:1px solid rgba(255,159,10,0.25);border-radius:28px;padding:40px;margin-bottom:48px}
        .alert h4{font-size:18px;font-weight:700;color:var(--orange);margin-bottom:24px}
        .alert-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
        @media(max-width:700px){.alert-grid{grid-template-columns:1fr}}
        .alert-item{display:flex;align-items:flex-start;gap:16px;padding:20px;background:rgba(0,0,0,0.3);border-radius:16px;font-size:15px;color:var(--muted);cursor:pointer;transition:all 0.3s}
        .alert-item:hover{background:rgba(255,159,10,0.1);transform:translateX(8px)}
        .alert-item::before{content:'‚ö°';font-size:18px}
        .alert-item strong{color:var(--text)}

        /* DATA BARS */
        .bars-box{background:var(--glass);backdrop-filter:blur(20px);border:1px solid var(--border);border-radius:32px;padding:40px}
        .bars-box h3{font-size:16px;font-weight:700;margin-bottom:32px}
        .bar-item{margin-bottom:24px;cursor:pointer}
        .bar-item:hover .bar-fill{filter:brightness(1.2)}
        .bar-item:hover .bar-label{color:var(--text)}
        .bar-head{display:flex;justify-content:space-between;margin-bottom:10px}
        .bar-label{font-size:14px;color:var(--muted);transition:color 0.3s}
        .bar-val{font-family:'JetBrains Mono',monospace;font-weight:700;font-size:14px}
        .bar-track{height:12px;background:rgba(255,255,255,0.08);border-radius:100px;overflow:hidden;position:relative}
        .bar-fill{height:100%;border-radius:100px;width:0;transition:width 1.5s cubic-bezier(0.23,1,0.32,1)}
        .bar-fill.red{background:linear-gradient(90deg,var(--red),var(--purple))}
        .bar-fill.green{background:linear-gradient(90deg,var(--green),var(--cyan))}
        .bar-fill.animated{width:var(--target-width)}
        .bar-threshold{position:absolute;top:-6px;bottom:-6px;width:3px;background:#fff;border-radius:100px;box-shadow:0 0 20px #fff;opacity:0;transition:opacity 0.5s}
        .bars-box:hover .bar-threshold{opacity:1}

        /* THRESHOLD GRID */
        .threshold-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:16px;margin-top:40px}
        @media(max-width:900px){.threshold-grid{grid-template-columns:repeat(3,1fr)}}
        @media(max-width:500px){.threshold-grid{grid-template-columns:repeat(2,1fr)}}
        .threshold-item{text-align:center;padding:28px;background:var(--surface);border:1px solid var(--border);border-radius:20px;transition:all 0.4s;cursor:pointer}
        .threshold-item:hover{border-color:var(--red);transform:translateY(-8px) scale(1.05);box-shadow:0 20px 40px rgba(255,45,85,0.2)}
        .threshold-label{font-size:11px;font-weight:700;letter-spacing:0.1em;text-transform:uppercase;color:var(--muted);margin-bottom:8px}
        .threshold-value{font-family:'JetBrains Mono',monospace;font-size:24px;font-weight:700;color:var(--red)}

        /* AFFORD CARDS */
        .afford-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:24px;margin-top:64px}
        @media(max-width:800px){.afford-grid{grid-template-columns:1fr}}
        .afford-card{padding:48px;border-radius:32px;text-align:center;transition:all 0.5s cubic-bezier(0.23,1,0.32,1);cursor:pointer}
        .afford-card.good{background:linear-gradient(135deg,rgba(50,215,75,0.1),transparent);border:1px solid rgba(50,215,75,0.3)}
        .afford-card.mid{background:linear-gradient(135deg,rgba(255,159,10,0.1),transparent);border:1px solid rgba(255,159,10,0.3)}
        .afford-card.bad{background:linear-gradient(135deg,rgba(255,45,85,0.1),transparent);border:1px solid rgba(255,45,85,0.3)}
        .afford-card:hover{transform:scale(1.08) translateY(-12px)}
        .afford-card:hover .afford-icon{transform:scale(1.3)}
        .afford-icon{font-size:48px;margin-bottom:16px;transition:transform 0.5s}
        .afford-label{font-size:12px;font-weight:700;letter-spacing:0.15em;text-transform:uppercase;color:var(--muted);margin-bottom:12px}
        .afford-status{font-size:28px;font-weight:800;margin-bottom:8px}
        .afford-card.good .afford-status{color:var(--green)}
        .afford-card.mid .afford-status{color:var(--orange)}
        .afford-card.bad .afford-status{color:var(--red)}
        .afford-desc{font-size:15px;color:var(--muted)}

        /* TABLE */
        .table-box{background:var(--glass);backdrop-filter:blur(20px);border:1px solid var(--border);border-radius:32px;overflow:hidden;margin-top:48px}
        .table-box h3{padding:32px 40px 0;font-size:16px;font-weight:700}
        .data-table{width:100%;border-collapse:collapse;margin-top:24px}
        .data-table th,.data-table td{padding:20px 40px;text-align:left;border-bottom:1px solid var(--border)}
        .data-table th{font-size:11px;font-weight:700;letter-spacing:0.1em;text-transform:uppercase;color:var(--muted)}
        .data-table td{font-family:'JetBrains Mono',monospace;font-size:15px}
        .data-table tr:last-child td{border-bottom:none}
        .data-table tr{transition:background 0.3s}
        .data-table tr:hover{background:rgba(255,45,85,0.05)}
        .red{color:var(--red)!important}

        /* FOOTER */
        .footer{padding:100px 0;text-align:center;border-top:1px solid var(--border);margin-top:100px}
        .footer-label{font-size:11px;font-weight:700;letter-spacing:0.2em;text-transform:uppercase;color:var(--muted);margin-bottom:20px}
        .footer-sources{font-size:15px;color:var(--dim);max-width:800px;margin:0 auto 32px;line-height:2}
        .footer-date{font-family:'JetBrains Mono',monospace;font-size:14px;color:var(--dim)}

        /* SCROLLBAR */
        ::-webkit-scrollbar{width:8px;height:8px}
        ::-webkit-scrollbar-track{background:transparent}
        ::-webkit-scrollbar-thumb{background:var(--border);border-radius:100px}
        ::-webkit-scrollbar-thumb:hover{background:var(--muted)}
        
        /* COUNTER ANIMATION */
        .counting{transition:none}
    </style>
</head>
<body>
    <canvas id="particles"></canvas>
    <div class="mouse-glow"></div>
    <div class="mesh-bg"></div>
    <div class="grain"></div>

    <div class="wrap">
        <!-- HERO -->
        <section class="hero">
            <div class="container">
                <div class="hero-content">
                    <div class="badge" onclick="confetti()"><div class="badge-dot"></div><span>Economic Crisis Alert</span></div>
                    <h1>
                        <span class="line"><span>Massachusetts</span></span>
                        <span class="line"><span>is <span class="gradient">Unaffordable</span></span></span>
                    </h1>
                    <p class="hero-sub">A data-driven analysis of the state's employment, housing, and cost-of-living crisis ‚Äî built exclusively from official government sources.</p>
                    
                    <div class="hero-stats">
                        <div class="hero-stat" onclick="this.classList.toggle('expanded')">
                            <div class="tooltip">Ranked 44th out of 51 (50 states + DC)</div>
                            <div class="stat-icon" style="color:var(--red)">üìâ</div>
                            <div class="stat-label">Unemployment Rank</div>
                            <div class="stat-value red" data-count="44" data-prefix="#">#44</div>
                            <div class="stat-sub">Only 7 states worse</div>
                        </div>
                        <div class="hero-stat" onclick="this.classList.toggle('expanded')">
                            <div class="tooltip">Only Hawaii is more expensive</div>
                            <div class="stat-icon" style="color:var(--yellow)">üí∞</div>
                            <div class="stat-label">Cost of Living</div>
                            <div class="stat-value red" data-count="2" data-prefix="#">#2</div>
                            <div class="stat-sub">Most expensive state</div>
                        </div>
                        <div class="hero-stat" onclick="this.classList.toggle('expanded')">
                            <div class="tooltip">Up 55% since 2019</div>
                            <div class="stat-icon" style="color:var(--cyan)">üè†</div>
                            <div class="stat-label">Median Home</div>
                            <div class="stat-value cyan" data-count="638" data-prefix="$" data-suffix="K">$638K</div>
                            <div class="stat-sub">+55% since 2019</div>
                        </div>
                        <div class="hero-stat" onclick="this.classList.toggle('expanded')">
                            <div class="tooltip">31.37¬¢/kWh vs 17.98¬¢ national</div>
                            <div class="stat-icon" style="color:var(--orange)">‚ö°</div>
                            <div class="stat-label">Electricity Rate</div>
                            <div class="stat-value red" data-count="74" data-prefix="+" data-suffix="%">+74%</div>
                            <div class="stat-sub">vs national average</div>
                        </div>
                        <div class="hero-stat" onclick="this.classList.toggle('expanded')">
                            <div class="tooltip">$173K below "comfortable" income</div>
                            <div class="stat-icon" style="color:var(--purple)">üìä</div>
                            <div class="stat-label">Income Gap</div>
                            <div class="stat-value red" data-count="55" data-suffix="%">55%</div>
                            <div class="stat-sub">Short of "comfortable"</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- NAV -->
        <nav class="nav">
            <div class="container">
                <div class="nav-inner">
                    <button class="nav-btn active" onclick="show('overview',this)">Overview</button>
                    <button class="nav-btn" onclick="show('employment',this)">Employment</button>
                    <button class="nav-btn" onclick="show('housing',this)">Housing</button>
                    <button class="nav-btn" onclick="show('electricity',this)">‚ö° Electricity</button>
                    <button class="nav-btn" onclick="show('inflation',this)">Inflation</button>
                    <button class="nav-btn" onclick="show('income',this)">Income</button>
                    <button class="nav-btn" onclick="show('afford',this)">Affordability</button>
                </div>
            </div>
        </nav>

        <main class="container">
            <!-- OVERVIEW -->
            <section id="overview" class="section active">
                <div class="mega reveal">
                    <div class="mega-inner">
                        <div>
                            <div class="mega-label">The Bottom Line</div>
                            <div class="mega-value">$<span data-count="313747" class="counter">313,747</span></div>
                            <div class="mega-desc">Annual income needed for a family of 4 to live "comfortably" in Massachusetts ‚Äî the highest threshold in the entire nation.</div>
                        </div>
                        <div class="mega-box">
                            <div class="mega-label">Median Family Income</div>
                            <div class="mega-box-value">$<span data-count="140309" class="counter">140,309</span></div>
                            <hr>
                            <div class="mega-label">Shortfall</div>
                            <div class="mega-box-value red">‚àí$<span data-count="173438" class="counter">173,438</span></div>
                            <div style="font-size:14px;color:var(--dim);margin-top:8px">Only 45% of what's needed</div>
                        </div>
                    </div>
                </div>
                
                <!-- INTERACTIVE TIMELINE -->
                <div class="timeline-box reveal">
                    <h3>üìÖ Interactive Timeline ‚Äî Drag to Explore</h3>
                    <div class="timeline-display">
                        <div class="timeline-year" id="timelineYear">2025</div>
                    </div>
                    <div class="timeline-slider">
                        <div class="timeline-track">
                            <div class="timeline-fill" id="timelineFill" style="width:100%"></div>
                        </div>
                        <div class="timeline-thumb" id="timelineThumb" style="left:100%"></div>
                    </div>
                    <div class="timeline-labels">
                        <span onclick="setYear(0)">2019</span>
                        <span onclick="setYear(1)">2020</span>
                        <span onclick="setYear(2)">2021</span>
                        <span onclick="setYear(3)">2022</span>
                        <span onclick="setYear(4)">2023</span>
                        <span onclick="setYear(5)">2024</span>
                        <span onclick="setYear(6)" class="active">2025</span>
                    </div>
                    <div class="timeline-stats">
                        <div class="timeline-stat">
                            <div class="timeline-stat-label">Unemployment</div>
                            <div class="timeline-stat-value" id="tlUnemployment" style="color:var(--red)">4.8%</div>
                        </div>
                        <div class="timeline-stat">
                            <div class="timeline-stat-label">Median Home</div>
                            <div class="timeline-stat-value" id="tlHome" style="color:var(--cyan)">$638K</div>
                        </div>
                        <div class="timeline-stat">
                            <div class="timeline-stat-label">vs National</div>
                            <div class="timeline-stat-value" id="tlVsNational" style="color:var(--yellow)">+0.4%</div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-grid">
                    <div class="chart-box reveal"><h3>üìà Unemployment Trend</h3><div class="chart-wrap"><canvas id="c1"></canvas></div></div>
                    <div class="chart-box reveal"><h3>üíµ Cost of Living Premium</h3><div class="chart-wrap"><canvas id="c2"></canvas></div></div>
                </div>
            </section>

            <!-- EMPLOYMENT -->
            <section id="employment" class="section">
                <div class="section-head reveal">
                    <h2>Employment Crisis</h2>
                    <p>Massachusetts ranks 44th in unemployment ‚Äî worse than 86% of states. 2025 was the worst year since COVID recovery began.</p>
                </div>
                <div class="card-grid">
                    <div class="card reveal" onclick="this.classList.toggle('expanded')">
                        <div class="card-expand">+</div>
                        <div class="card-label">Unemployment</div>
                        <div class="card-value red"><span class="counter" data-count="4.8">4.8</span>%</div>
                        <div class="card-sub">December 2025</div>
                        <div class="card-tag bad">‚ñ≤ +0.4% vs National</div>
                        <div class="card-detail"><p>MA unemployment has risen for 8 consecutive months. The state labor market is significantly weaker than the national average for the first time since 2014.</p></div>
                    </div>
                    <div class="card reveal" onclick="this.classList.toggle('expanded')">
                        <div class="card-expand">+</div>
                        <div class="card-label">National Rank</div>
                        <div class="card-value red">#<span class="counter" data-count="44">44</span></div>
                        <div class="card-sub">of 51 (50 + DC)</div>
                        <div class="card-detail"><p>Only 7 states have higher unemployment: Nevada, California, DC, New Jersey, Illinois, New York, and Washington.</p></div>
                    </div>
                    <div class="card reveal" onclick="this.classList.toggle('expanded')">
                        <div class="card-expand">+</div>
                        <div class="card-label">Net Jobs 2025</div>
                        <div class="card-value red">‚àí<span class="counter" data-count="4500">4,500</span></div>
                        <div class="card-sub">Declining employment</div>
                        <div class="card-detail"><p>September 2025 was the worst single month (-11,100 jobs) since the COVID shutdowns of 2020.</p></div>
                    </div>
                    <div class="card reveal" onclick="this.classList.toggle('expanded')">
                        <div class="card-expand">+</div>
                        <div class="card-label">Layoffs YTD</div>
                        <div class="card-value yellow"><span class="counter" data-count="323">323</span>K</div>
                        <div class="card-sub">+13.7% vs 2024</div>
                        <div class="card-detail"><p>Tech sector layoffs lead the way, with biotech and healthcare following. Major employers like State Street and Biogen have announced significant cuts.</p></div>
                    </div>
                </div>
                <div class="alert reveal">
                    <h4>‚ö†Ô∏è Critical Employment Indicators</h4>
                    <div class="alert-grid">
                        <div class="alert-item">MA was the <strong>only state</strong> to extend benefits to 30 weeks</div>
                        <div class="alert-item">September 2025: <strong>worst month since COVID</strong></div>
                        <div class="alert-item">Graduates: <strong>5.76%</strong> unemployment, <strong>34%</strong> underemployed</div>
                        <div class="alert-item">Insured unemployment: <strong>2.7%</strong> (5th highest nationally)</div>
                    </div>
                </div>
                <div class="chart-grid">
                    <div class="chart-box reveal"><h3>üèÜ State Rankings</h3><div class="chart-wrap"><canvas id="c3"></canvas></div></div>
                    <div class="chart-box reveal"><h3>üìä Historical Trend</h3><div class="chart-wrap"><canvas id="c4"></canvas></div></div>
                </div>
            </section>

            <!-- HOUSING -->
            <section id="housing" class="section">
                <div class="section-head reveal">
                    <h2>Housing Unattainability</h2>
                    <p>The median Massachusetts family cannot afford the median Massachusetts home. Prices have risen 55% since 2019.</p>
                </div>
                <div class="card-grid">
                    <div class="card reveal"><div class="card-label">Median Price</div><div class="card-value red">$<span class="counter" data-count="638">638</span>K</div><div class="card-sub">Statewide</div><div class="card-tag bad">‚ñ≤ +3.7% YoY</div></div>
                    <div class="card reveal"><div class="card-label">Greater Boston</div><div class="card-value red">$<span class="counter" data-count="800">800</span>K</div><div class="card-sub">Metro median</div></div>
                    <div class="card reveal"><div class="card-label">Income Needed</div><div class="card-value yellow">$<span class="counter" data-count="171">171</span>K</div><div class="card-sub">28% DTI rule</div></div>
                    <div class="card reveal"><div class="card-label">Housing Deficit</div><div class="card-value"><span class="counter" data-count="222">222</span>K</div><div class="card-sub">Units needed</div></div>
                </div>
                <div class="chart-grid">
                    <div class="chart-box reveal"><h3>üìà Price Trend</h3><div class="chart-wrap"><canvas id="c5"></canvas></div></div>
                    <div class="chart-box reveal"><h3>üó∫Ô∏è Regional Comparison</h3><div class="chart-wrap"><canvas id="c6"></canvas></div></div>
                </div>
                <div class="table-box reveal">
                    <h3>üí∞ Affordability Calculation</h3>
                    <table class="data-table">
                        <tr><th>Metric</th><th>Value</th></tr>
                        <tr><td>Median Home</td><td>$638,000</td></tr>
                        <tr><td>Down Payment (20%)</td><td>$127,600</td></tr>
                        <tr><td>Monthly @ 6.1%</td><td>$3,996</td></tr>
                        <tr><td>Income Needed</td><td>$171,257</td></tr>
                        <tr><td>Median HH Income</td><td>$104,800</td></tr>
                        <tr><td class="red">Gap</td><td class="red">‚àí$66,457 (39% short)</td></tr>
                    </table>
                </div>
            </section>

            <!-- ELECTRICITY -->
            <section id="electricity" class="section">
                <div class="section-head reveal">
                    <h2>‚ö° Electricity Crisis</h2>
                    <p>Massachusetts has the 3rd highest electricity rates in the nation. Residents pay 74% more than the national average ‚Äî an extra $1,188 per year per household.</p>
                </div>
                
                <!-- MEGA CALLOUT -->
                <div class="mega reveal" style="background:linear-gradient(135deg,rgba(255,159,10,0.1),rgba(255,45,85,0.05));border-color:rgba(255,159,10,0.3);">
                    <div class="mega-inner">
                        <div>
                            <div class="mega-label">Massachusetts Electricity Rate</div>
                            <div class="mega-value" style="color:var(--orange)">31.37¬¢</div>
                            <div class="mega-desc">Per kilowatt-hour ‚Äî <strong>74% higher</strong> than the national average of 17.98¬¢/kWh. Only Hawaii and California are more expensive.</div>
                        </div>
                        <div class="mega-box">
                            <div class="mega-label">National Average</div>
                            <div class="mega-box-value" style="color:var(--green)">17.98¬¢</div>
                            <hr>
                            <div class="mega-label">MA Premium</div>
                            <div class="mega-box-value red">+74%</div>
                            <div style="font-size:14px;color:var(--dim);margin-top:8px">Extra $99/month for typical household</div>
                        </div>
                    </div>
                </div>
                
                <div class="card-grid">
                    <div class="card reveal"><div class="card-label">Residential Rate</div><div class="card-value red">31.37¬¢</div><div class="card-sub">per kWh (Oct 2025)</div><div class="card-tag bad">#3 Most Expensive</div></div>
                    <div class="card reveal"><div class="card-label">Industrial Rate</div><div class="card-value red">18.34¬¢</div><div class="card-sub">per kWh</div><div class="card-tag bad">+112% vs US</div></div>
                    <div class="card reveal"><div class="card-label">Rate Growth</div><div class="card-value red">+81%</div><div class="card-sub">Since 2014</div><div class="card-tag bad">2x faster than US</div></div>
                    <div class="card reveal"><div class="card-label">Annual Extra Cost</div><div class="card-value yellow">$1,188</div><div class="card-sub">vs national avg</div></div>
                </div>
                
                <!-- STATE RANKINGS ALERT -->
                <div class="alert reveal" style="background:linear-gradient(135deg,rgba(255,159,10,0.1),rgba(255,159,10,0.03));border-color:rgba(255,159,10,0.3);">
                    <h4>üèÜ State Electricity Rankings ‚Äî Residential (October 2025)</h4>
                    <div class="alert-grid" style="grid-template-columns:repeat(2,1fr)">
                        <div class="alert-item"><strong>#1 Hawaii:</strong> 39.74¬¢/kWh</div>
                        <div class="alert-item"><strong>#2 California:</strong> 33.60¬¢/kWh</div>
                        <div class="alert-item" style="background:rgba(255,45,85,0.15);border:1px solid rgba(255,45,85,0.3)"><strong>#3 Massachusetts:</strong> 31.37¬¢/kWh</div>
                        <div class="alert-item"><strong>#4 Rhode Island:</strong> 31.16¬¢/kWh</div>
                        <div class="alert-item"><strong>#5 Maine:</strong> 29.42¬¢/kWh</div>
                        <div class="alert-item"><strong>#6 Connecticut:</strong> 27.72¬¢/kWh</div>
                    </div>
                    <div style="text-align:center;margin-top:16px;font-size:13px;color:var(--muted)">6 of top 10 most expensive states are in New England</div>
                </div>
                
                <div class="chart-grid">
                    <div class="chart-box reveal"><h3>üìà MA vs US Rates (2014-2025)</h3><div class="chart-wrap"><canvas id="cElec1"></canvas></div></div>
                    <div class="chart-box reveal"><h3>üèÜ State Comparison (Oct 2025)</h3><div class="chart-wrap"><canvas id="cElec2"></canvas></div></div>
                </div>
                
                <!-- POLICY CHARGES BREAKDOWN -->
                <div class="mega reveal" style="margin-top:48px;background:linear-gradient(135deg,rgba(255,45,85,0.08),rgba(191,90,242,0.05));border-color:rgba(255,45,85,0.2);">
                    <div class="mega-inner">
                        <div>
                            <div class="mega-label">"Public Benefits" Charge on Your Bill</div>
                            <div class="mega-value" style="font-size:clamp(48px,10vw,90px)">17%</div>
                            <div class="mega-desc">The <strong>labeled</strong> policy charge on your Eversource bill. But additional policy-driven costs are embedded in distribution charges ‚Äî total estimated at <strong>~29%</strong> per DPU analysis.</div>
                        </div>
                        <div class="mega-box">
                            <div class="mega-label">Real Bill Examples</div>
                            <div class="mega-box-value">$73-$145</div>
                            <div style="font-size:14px;color:var(--dim);margin-top:8px">/month in policy charges</div>
                            <hr>
                            <div class="mega-label">Statewide Annual</div>
                            <div class="mega-box-value red">$4.4B</div>
                        </div>
                    </div>
                </div>
                
                <!-- REAL BILL EXAMPLES -->
                <div class="table-box reveal" style="margin-top:32px">
                    <h3>üí° Real MA Electric Bills ‚Äî Policy Charges at 17%</h3>
                    <table class="data-table">
                        <tr><th>Bill Total</th><th>Policy Charge (17%)</th><th>Location</th><th>Source</th></tr>
                        <tr><td>$427</td><td class="red">$73/month</td><td>Easthampton 2BR apt</td><td>WCVB</td></tr>
                        <tr><td>$709</td><td class="red">$121/month</td><td>Billerica home</td><td>WBUR</td></tr>
                        <tr><td>$853</td><td class="red">$145/month</td><td>Stoughton (with solar!)</td><td>Boston Globe</td></tr>
                    </table>
                </div>
                
                <!-- WHAT PUBLIC BENEFITS INCLUDES -->
                <div class="alert reveal" style="margin-top:32px">
                    <h4>üìã What "Public Benefits" Includes</h4>
                    <div class="alert-grid">
                        <div class="alert-item"><strong>Mass Save</strong> ‚Äî energy efficiency programs ($1.5B/year statewide)</div>
                        <div class="alert-item"><strong>RPS</strong> ‚Äî Renewable Portfolio Standard compliance</div>
                        <div class="alert-item"><strong>SMART</strong> ‚Äî Solar incentive program</div>
                        <div class="alert-item"><strong>RGGI</strong> ‚Äî Regional carbon allowances</div>
                        <div class="alert-item"><strong>Net Metering</strong> ‚Äî Solar buyback subsidies</div>
                        <div class="alert-item"><strong>Other</strong> ‚Äî Various clean energy mandates</div>
                    </div>
                    <div style="margin-top:16px;font-size:13px;color:var(--muted)">Note: Additional policy costs are embedded in Distribution charges (grid upgrades for renewables, etc.) ‚Äî total policy-driven costs estimated at ~29% per State Senator Brownsberger's DPU analysis.</div>
                </div>
                
                <div class="chart-grid" style="margin-top:48px">
                    <div class="chart-box reveal"><h3>üìä Monthly Bill Breakdown</h3><div class="chart-wrap"><canvas id="cElec3"></canvas></div></div>
                    <div class="chart-box reveal"><h3>üí∏ Extra Annual Cost vs US Average</h3><div class="chart-wrap"><canvas id="cElec4"></canvas></div></div>
                </div>
                
                <!-- RECENT RATE HIKES -->
                <div class="alert reveal" style="margin-top:48px;background:linear-gradient(135deg,rgba(255,45,85,0.1),rgba(255,45,85,0.03));border-color:rgba(255,45,85,0.3);">
                    <h4>üö® Recent Rate Increases</h4>
                    <div class="alert-grid">
                        <div class="alert-item">Eversource electricity: <strong>+12.3%</strong> (Aug 1, 2025)</div>
                        <div class="alert-item">Eversource electricity: <strong>+5.01%</strong> (Feb 1, 2026)</div>
                        <div class="alert-item">National Grid gas delivery: <strong>+63%</strong> (Nov 1, 2024)</div>
                        <div class="alert-item">Eversource gas delivery: <strong>+24-28%</strong> (Nov 1, 2024)</div>
                    </div>
                </div>
                
                <!-- SOURCES BOX -->
                <div class="table-box reveal" style="margin-top:48px">
                    <h3>üìã Official Data Sources</h3>
                    <table class="data-table">
                        <tr><th>Data Point</th><th>Source</th></tr>
                        <tr><td>State electricity rates (31.37¬¢)</td><td>EIA Electric Power Monthly, Table 5.6.A (Oct 2025)</td></tr>
                        <tr><td>Bill breakdown (40/30/17/13%)</td><td>Eversource official breakdown (Dec 2025, Western Mass News)</td></tr>
                        <tr><td>Policy cost analysis (~29% total)</td><td>State Senator Will Brownsberger, DPU analysis</td></tr>
                        <tr><td>Real bill examples</td><td>WCVB, WBUR, Boston Globe reporting</td></tr>
                        <tr><td>Rate filings</td><td>MA DPU Docket D.P.U. 24-150, D.P.U. 25-200</td></tr>
                        <tr><td>Mass Save budget ($1.5B/yr)</td><td>MA DOER, Mass Save program filings</td></tr>
                        <tr><td>Historical rates</td><td>EIA State Electricity Profiles</td></tr>
                    </table>
                </div>
            </section>

            <!-- INFLATION -->
            <section id="inflation" class="section">
                <div class="section-head reveal">
                    <h2>Inflation Squeeze</h2>
                    <p>Northeast inflation consistently outpaces national averages. Real wages have declined ‚Äî workers have less purchasing power than 2020.</p>
                </div>
                <div class="card-grid">
                    <div class="card reveal"><div class="card-label">Northeast CPI</div><div class="card-value red"><span class="counter" data-count="3.3">3.3</span>%</div><div class="card-sub">December 2025</div><div class="card-tag bad">‚ñ≤ vs 2.7% national</div></div>
                    <div class="card reveal"><div class="card-label">Core Inflation</div><div class="card-value yellow"><span class="counter" data-count="3.1">3.1</span>%</div><div class="card-sub">Ex food & energy</div></div>
                    <div class="card reveal"><div class="card-label">Cumulative</div><div class="card-value red">+<span class="counter" data-count="21.6">21.6</span>%</div><div class="card-sub">Since Jan 2020</div></div>
                    <div class="card reveal"><div class="card-label">Energy</div><div class="card-value yellow">+<span class="counter" data-count="5.6">5.6</span>%</div><div class="card-sub">YoY increase</div></div>
                </div>
                <div class="chart-grid">
                    <div class="chart-box reveal"><h3>üìä NE vs National Inflation</h3><div class="chart-wrap"><canvas id="c7"></canvas></div></div>
                    <div class="chart-box reveal" style="background:linear-gradient(135deg,rgba(255,45,85,0.08),rgba(191,90,242,0.05));border-color:rgba(255,45,85,0.2)">
                        <h3>üí∏ Real Wage Impact</h3>
                        <div style="padding:20px 0">
                            <div style="margin-bottom:40px">
                                <div style="font-size:11px;font-weight:700;letter-spacing:0.15em;text-transform:uppercase;color:var(--muted)">Nominal Wage Growth</div>
                                <div style="font-family:'JetBrains Mono';font-size:56px;font-weight:700;color:var(--green)">+<span class="counter" data-count="21.8">21.8</span>%</div>
                            </div>
                            <div style="margin-bottom:40px">
                                <div style="font-size:11px;font-weight:700;letter-spacing:0.15em;text-transform:uppercase;color:var(--muted)">CPI Increase</div>
                                <div style="font-family:'JetBrains Mono';font-size:56px;font-weight:700;color:var(--red)">+<span class="counter" data-count="22.7">22.7</span>%</div>
                            </div>
                            <div style="border-top:1px solid var(--border);padding-top:40px">
                                <div style="font-size:11px;font-weight:700;letter-spacing:0.15em;text-transform:uppercase;color:var(--muted)">Real Wage Change</div>
                                <div style="font-family:'JetBrains Mono';font-size:56px;font-weight:800;color:var(--red)">‚àí<span class="counter" data-count="0.7">0.7</span>%</div>
                                <div style="color:var(--muted);margin-top:12px;font-size:15px">Workers have LESS purchasing power than 4 years ago</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- INCOME -->
            <section id="income" class="section">
                <div class="section-head reveal">
                    <h2>Income by Occupation</h2>
                    <p>Despite having the highest median income nationally, 7 of 15 common occupations pay below the living wage threshold.</p>
                </div>
                <div class="card-grid">
                    <div class="card reveal"><div class="card-label">Median HH</div><div class="card-value green">$<span class="counter" data-count="104800">104,800</span></div><div class="card-sub">#1 nationally</div></div>
                    <div class="card reveal"><div class="card-label">Living Wage</div><div class="card-value">$<span class="counter" data-count="60080">60,080</span></div><div class="card-sub">Single adult</div></div>
                    <div class="card reveal"><div class="card-label">Below Threshold</div><div class="card-value red">7 of 15</div><div class="card-sub">Common jobs</div></div>
                    <div class="card reveal"><div class="card-label">Real Growth</div><div class="card-value yellow">+<span class="counter" data-count="4.1">4.1</span>%</div><div class="card-sub">vs 5.5% national</div></div>
                </div>
                <div class="bars-box reveal">
                    <h3>üíº Salary vs Living Wage ($60,080) ‚Äî Click bars for details</h3>
                    <div id="salaryBars"></div>
                </div>
            </section>

            <!-- AFFORDABILITY -->
            <section id="afford" class="section">
                <div class="section-head reveal">
                    <h2>The Affordability Crisis</h2>
                    <p>The gap between what families need and what they earn continues to widen every year.</p>
                </div>
                <div class="chart-grid">
                    <div class="chart-box reveal"><h3>üìä Income vs Need</h3><div class="chart-wrap"><canvas id="c8"></canvas></div></div>
                    <div class="chart-box reveal"><h3>üìà Consumption vs Income</h3><div class="chart-wrap"><canvas id="c9"></canvas></div></div>
                </div>
                <div class="bars-box reveal" style="margin-top:48px">
                    <h3>üìã Living Wage Thresholds</h3>
                    <div class="threshold-grid">
                        <div class="threshold-item"><div class="threshold-label">Single Adult</div><div class="threshold-value">$<span class="counter" data-count="60080">60,080</span></div></div>
                        <div class="threshold-item"><div class="threshold-label">Couple</div><div class="threshold-value">$<span class="counter" data-count="80602">80,602</span></div></div>
                        <div class="threshold-item"><div class="threshold-label">Single + Child</div><div class="threshold-value">$<span class="counter" data-count="114708">114,708</span></div></div>
                        <div class="threshold-item"><div class="threshold-label">Couple + Child</div><div class="threshold-value">$<span class="counter" data-count="124849">124,849</span></div></div>
                        <div class="threshold-item"><div class="threshold-label">Couple + 2 Kids</div><div class="threshold-value">$<span class="counter" data-count="156857">156,857</span></div></div>
                    </div>
                    <div style="text-align:center;margin-top:24px;font-size:13px;color:var(--dim)">Source: MIT Living Wage Calculator (2025)</div>
                </div>
                <div class="afford-grid reveal">
                    <div class="afford-card good">
                        <div class="afford-icon">‚úì</div>
                        <div class="afford-label">Top 10%</div>
                        <div class="afford-status">Comfortable</div>
                        <div class="afford-desc">Housing, savings, and discretionary spending</div>
                    </div>
                    <div class="afford-card mid">
                        <div class="afford-icon">‚ö†Ô∏è</div>
                        <div class="afford-label">Median (50th)</div>
                        <div class="afford-status">Treading Water</div>
                        <div class="afford-desc">Meeting basics with no margin</div>
                    </div>
                    <div class="afford-card bad">
                        <div class="afford-icon">‚úó</div>
                        <div class="afford-label">Bottom 60%</div>
                        <div class="afford-status">Drowning</div>
                        <div class="afford-desc">Cannot afford basic expenses</div>
                    </div>
                </div>
            </section>

            <!-- FOOTER -->
            <footer class="footer">
                <div class="footer-label">Official Data Sources</div>
                <div class="footer-sources">BLS (LAUS, CES, OES, CPI) ‚Ä¢ BEA (SAINC, SAPCE, RPP) ‚Ä¢ FRED ‚Ä¢ Census ACS ‚Ä¢ Warren Group ‚Ä¢ MIT Living Wage Calculator ‚Ä¢ CHIA ‚Ä¢ EIA</div>
                <div class="footer-date">Last Updated: January 31, 2026</div>
            </footer>
        </main>
    </div>

    <script>
        // === PARTICLE SYSTEM ===
        const canvas = document.getElementById('particles');
        const ctx = canvas.getContext('2d');
        let particles = [];
        
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        class Particle {
            constructor() {
                this.reset();
            }
            reset() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 2 + 0.5;
                this.speedX = (Math.random() - 0.5) * 0.5;
                this.speedY = (Math.random() - 0.5) * 0.5;
                this.opacity = Math.random() * 0.5 + 0.1;
                this.color = ['#ff2d55', '#00d4ff', '#bf5af2', '#32d74b'][Math.floor(Math.random() * 4)];
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                if (this.x < 0 || this.x > canvas.width || this.y < 0 || this.y > canvas.height) {
                    this.reset();
                }
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.globalAlpha = this.opacity;
                ctx.fill();
                ctx.globalAlpha = 1;
            }
        }
        
        for (let i = 0; i < 80; i++) {
            particles.push(new Particle());
        }
        
        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => {
                p.update();
                p.draw();
            });
            requestAnimationFrame(animateParticles);
        }
        animateParticles();

        // === MOUSE GLOW ===
        const mouseGlow = document.querySelector('.mouse-glow');
        let mouseX = 0, mouseY = 0;
        document.addEventListener('mousemove', e => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            mouseGlow.style.left = mouseX + 'px';
            mouseGlow.style.top = mouseY + 'px';
            mouseGlow.classList.add('active');
        });
        document.addEventListener('mouseleave', () => {
            mouseGlow.classList.remove('active');
        });

        // === NAVIGATION ===
        function show(id, btn) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if (btn) btn.classList.add('active');
            
            // Trigger animations for newly visible section
            setTimeout(() => {
                observeElements();
                animateBars();
            }, 100);
        }

        // === SCROLL REVEAL ===
        function observeElements() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        // Animate counters
                        entry.target.querySelectorAll('.counter').forEach(counter => {
                            animateCounter(counter);
                        });
                    }
                });
            }, { threshold: 0.1 });
            
            document.querySelectorAll('.reveal, .reveal-left, .reveal-scale').forEach(el => {
                observer.observe(el);
            });
        }
        observeElements();

        // === ANIMATED COUNTERS ===
        function animateCounter(el) {
            if (el.classList.contains('counted')) return;
            el.classList.add('counted');
            
            const target = parseFloat(el.dataset.count);
            const duration = 2000;
            const start = performance.now();
            const isDecimal = target % 1 !== 0;
            
            function update(now) {
                const elapsed = now - start;
                const progress = Math.min(elapsed / duration, 1);
                const eased = 1 - Math.pow(1 - progress, 4);
                const current = target * eased;
                
                if (isDecimal) {
                    el.textContent = current.toFixed(1);
                } else if (target >= 1000) {
                    el.textContent = Math.floor(current).toLocaleString();
                } else {
                    el.textContent = Math.floor(current);
                }
                
                if (progress < 1) {
                    requestAnimationFrame(update);
                } else {
                    if (isDecimal) {
                        el.textContent = target.toFixed(1);
                    } else if (target >= 1000) {
                        el.textContent = target.toLocaleString();
                    } else {
                        el.textContent = target;
                    }
                }
            }
            requestAnimationFrame(update);
        }

        // === ANIMATED BARS ===
        function animateBars() {
            document.querySelectorAll('.bar-fill').forEach(bar => {
                const width = bar.style.getPropertyValue('--target-width');
                if (width) {
                    setTimeout(() => {
                        bar.classList.add('animated');
                    }, 100);
                }
            });
        }

        // === TIMELINE ===
        const timelineData = [
            { year: 2019, unemp: 3.0, home: 410, vs: -0.7 },
            { year: 2020, unemp: 8.9, home: 450, vs: 0.8 },
            { year: 2021, unemp: 5.4, home: 550, vs: 0.0 },
            { year: 2022, unemp: 3.7, home: 550, vs: 0.1 },
            { year: 2023, unemp: 3.5, home: 570, vs: -0.1 },
            { year: 2024, unemp: 4.1, home: 615, vs: 0.1 },
            { year: 2025, unemp: 4.8, home: 638, vs: 0.4 }
        ];
        
        const thumb = document.getElementById('timelineThumb');
        const fill = document.getElementById('timelineFill');
        const yearDisplay = document.getElementById('timelineYear');
        const tlLabels = document.querySelectorAll('.timeline-labels span');
        let isDragging = false;
        
        function setYear(index) {
            const pct = (index / 6) * 100;
            thumb.style.left = pct + '%';
            fill.style.width = pct + '%';
            
            const data = timelineData[index];
            yearDisplay.textContent = data.year;
            document.getElementById('tlUnemployment').textContent = data.unemp + '%';
            document.getElementById('tlHome').textContent = '$' + data.home + 'K';
            document.getElementById('tlVsNational').textContent = (data.vs >= 0 ? '+' : '') + data.vs + '%';
            
            tlLabels.forEach((l, i) => l.classList.toggle('active', i === index));
        }
        
        thumb.addEventListener('mousedown', () => isDragging = true);
        document.addEventListener('mouseup', () => isDragging = false);
        document.addEventListener('mousemove', e => {
            if (!isDragging) return;
            const track = document.querySelector('.timeline-track');
            const rect = track.getBoundingClientRect();
            let pct = ((e.clientX - rect.left) / rect.width) * 100;
            pct = Math.max(0, Math.min(100, pct));
            const index = Math.round((pct / 100) * 6);
            setYear(index);
        });

        // === CONFETTI ===
        function confetti() {
            for (let i = 0; i < 50; i++) {
                const conf = document.createElement('div');
                conf.style.cssText = `
                    position:fixed;
                    width:10px;height:10px;
                    background:${['#ff2d55','#00d4ff','#32d74b','#ffd60a','#bf5af2'][Math.floor(Math.random()*5)]};
                    left:${Math.random()*100}vw;
                    top:-20px;
                    border-radius:${Math.random()>0.5?'50%':'0'};
                    pointer-events:none;
                    z-index:9999;
                    animation:confettiFall ${2+Math.random()*2}s linear forwards;
                `;
                document.body.appendChild(conf);
                setTimeout(() => conf.remove(), 4000);
            }
        }
        
        const confettiStyle = document.createElement('style');
        confettiStyle.textContent = `
            @keyframes confettiFall {
                to { transform: translateY(100vh) rotate(720deg); opacity: 0; }
            }
        `;
        document.head.appendChild(confettiStyle);

        // === CHARTS ===
        Chart.defaults.color = 'rgba(255,255,255,0.4)';
        Chart.defaults.borderColor = 'rgba(255,255,255,0.06)';
        Chart.defaults.font.family = "'Inter',sans-serif";
        
        const R='#ff2d55',G='#32d74b',C='#00d4ff',Y='#ffd60a',P='#bf5af2',M='rgba(255,255,255,0.2)';
        
        const gR=ctx=>{const g=ctx.chart.ctx.createLinearGradient(0,0,0,320);g.addColorStop(0,'rgba(255,45,85,0.4)');g.addColorStop(1,'rgba(255,45,85,0)');return g};
        const gC=ctx=>{const g=ctx.chart.ctx.createLinearGradient(0,0,0,320);g.addColorStop(0,'rgba(0,212,255,0.4)');g.addColorStop(1,'rgba(0,212,255,0)');return g};

        new Chart(document.getElementById('c1'),{type:'line',data:{labels:['2019','2020','2021','2022','2023','2024','2025'],datasets:[{label:'Massachusetts',data:[3,8.9,5.4,3.7,3.5,4.1,4.8],borderColor:R,backgroundColor:gR,borderWidth:3,fill:true,tension:.4,pointRadius:6,pointBackgroundColor:R,pointBorderColor:'#fff',pointBorderWidth:2,pointHoverRadius:10},{label:'US Average',data:[3.7,8.1,5.4,3.6,3.6,4,4.4],borderColor:M,borderWidth:2,borderDash:[6,4],fill:false,tension:.4,pointRadius:0}]},options:{responsive:true,maintainAspectRatio:false,interaction:{intersect:false,mode:'index'},plugins:{legend:{position:'bottom',labels:{padding:24,usePointStyle:true,font:{size:12}}}}}});
        
        new Chart(document.getElementById('c2'),{type:'bar',data:{labels:['Utilities','Healthcare','Housing','Overall','Food','Transport'],datasets:[{data:[166,131,130,108,105,102],backgroundColor:[R,'#ff5577','#ff7799',Y,C,G],borderRadius:10,borderSkipped:false}]},options:{indexAxis:'y',responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false},tooltip:{callbacks:{label:ctx=>'Index: '+ctx.raw+' (National = 100)'}}},scales:{x:{min:0,max:180,grid:{color:'rgba(255,255,255,0.04)'}},y:{grid:{display:false}}}}});
        
        new Chart(document.getElementById('c3'),{type:'bar',data:{labels:['South Dakota','North Dakota','New Hampshire','US Average','Massachusetts','California','DC'],datasets:[{data:[1.9,2.5,3,4.4,4.8,5.5,6],backgroundColor:[G,G,G,M,R,Y,Y],borderRadius:10}]},options:{indexAxis:'y',responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{x:{min:0,max:7,grid:{color:'rgba(255,255,255,0.04)'}},y:{grid:{display:false}}}}});
        
        new Chart(document.getElementById('c4'),{type:'line',data:{labels:['2019','2020','2021','2022','2023','2024','2025'],datasets:[{label:'MA',data:[3,8.9,5.4,3.7,3.5,4.1,4.8],borderColor:R,borderWidth:3,fill:false,tension:.4,pointRadius:6,pointBackgroundColor:R},{label:'US',data:[3.7,8.1,5.4,3.6,3.6,4,4.4],borderColor:M,backgroundColor:'rgba(255,255,255,0.03)',borderWidth:2,fill:true,tension:.4,pointRadius:0}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom',labels:{padding:24,usePointStyle:true}}}}});
        
        new Chart(document.getElementById('c5'),{type:'line',data:{labels:['2019','2020','2021','2022','2023','2024','2025'],datasets:[{data:[410,450,550,550,570,615,638],borderColor:C,backgroundColor:gC,borderWidth:3,fill:true,tension:.4,pointRadius:6,pointBackgroundColor:C}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{y:{ticks:{callback:v=>'$'+v+'K'},grid:{color:'rgba(255,255,255,0.04)'}},x:{grid:{display:false}}}}});
        
        new Chart(document.getElementById('c6'),{type:'bar',data:{labels:['Springfield','Worcester','Statewide','Essex','Boston','Newburyport'],datasets:[{data:[288,450,638,699,800,1328],backgroundColor:[G,C,Y,P,R,'#333'],borderRadius:10}]},options:{indexAxis:'y',responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{x:{ticks:{callback:v=>'$'+v+'K'},grid:{color:'rgba(255,255,255,0.04)'}},y:{grid:{display:false}}}}});
        
        new Chart(document.getElementById('c7'),{type:'bar',data:{labels:['2020','2021','2022','2023','2024','2025'],datasets:[{label:'Northeast',data:[1.4,4.9,7.1,3.9,3.5,3.3],backgroundColor:R,borderRadius:8},{label:'National',data:[1.2,4.7,8,4.1,2.9,2.7],backgroundColor:'rgba(255,255,255,0.12)',borderRadius:8}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom',labels:{padding:24,usePointStyle:true}}},scales:{y:{ticks:{callback:v=>v+'%'},grid:{color:'rgba(255,255,255,0.04)'}},x:{grid:{display:false}}}}});
        
        new Chart(document.getElementById('c8'),{type:'bar',data:{labels:['Need to be Comfortable','Median Family Income'],datasets:[{data:[313747,140309],backgroundColor:[R,G],borderRadius:16,barThickness:80}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{y:{ticks:{callback:v=>'$'+(v/1000)+'K'},max:350000,grid:{color:'rgba(255,255,255,0.04)'}},x:{grid:{display:false}}}}});
        
        new Chart(document.getElementById('c9'),{type:'bar',data:{labels:['Financial Svc','Transport','Healthcare','Housing','Consumption','Income'],datasets:[{data:[12.2,9.67,7.41,6.76,6.1,5.09],backgroundColor:ctx=>ctx.dataIndex===5?G:R,borderRadius:8}]},options:{indexAxis:'y',responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{x:{ticks:{callback:v=>v+'%'},grid:{color:'rgba(255,255,255,0.04)'}},y:{grid:{display:false}}}}});

        // === ELECTRICITY CHARTS ===
        // cElec1: MA vs US rates over time
        new Chart(document.getElementById('cElec1'),{type:'line',data:{labels:['2014','2015','2016','2017','2018','2019','2020','2021','2022','2023','2024','2025'],datasets:[{label:'Massachusetts',data:[18.8,19.8,21.5,21.8,24.7,25.5,24.5,24.5,30.7,29.2,35.3,31.4],borderColor:'#ff9f0a',backgroundColor:'rgba(255,159,10,0.2)',borderWidth:3,fill:true,tension:.4,pointRadius:5,pointBackgroundColor:'#ff9f0a'},{label:'US Average',data:[12.5,12.7,12.6,12.9,13.0,13.0,13.2,13.7,15.1,16.2,16.8,17.5],borderColor:G,borderWidth:2,borderDash:[5,5],fill:false,tension:.4,pointRadius:0}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom',labels:{padding:20,usePointStyle:true}}},scales:{y:{ticks:{callback:v=>v+'¬¢'},grid:{color:'rgba(255,255,255,0.04)'}},x:{grid:{display:false}}}}});
        
        // cElec2: State comparison bar chart
        new Chart(document.getElementById('cElec2'),{type:'bar',data:{labels:['Hawaii','California','Massachusetts','Rhode Island','Maine','Connecticut','US Average','Louisiana'],datasets:[{data:[39.74,33.60,31.37,31.16,29.42,27.72,17.98,12.39],backgroundColor:['#666','#888','#ff9f0a','#aaa','#aaa','#aaa',G,'#32d74b'],borderRadius:8}]},options:{indexAxis:'y',responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{x:{ticks:{callback:v=>v+'¬¢'},grid:{color:'rgba(255,255,255,0.04)'}},y:{grid:{display:false}}}}});
        
        // cElec3: Bill breakdown pie/doughnut - VERIFIED Eversource breakdown (Dec 2025)
        new Chart(document.getElementById('cElec3'),{type:'doughnut',data:{labels:['Supply (40%)','Distribution (30%)','Public Benefits (17%)','Transmission (13%)'],datasets:[{data:[40,30,17,13],backgroundColor:[C,'#667eea',R,Y],borderWidth:0}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom',labels:{padding:20,usePointStyle:true}}}}});
        
        // cElec4: Extra annual cost over time
        new Chart(document.getElementById('cElec4'),{type:'bar',data:{labels:['2014','2016','2018','2020','2022','2024','2025'],datasets:[{label:'Extra Cost vs US',data:[456,636,840,816,1116,1332,1188],backgroundColor:R,borderRadius:8}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false}},scales:{y:{ticks:{callback:v=>'$'+v},grid:{color:'rgba(255,255,255,0.04)'}},x:{grid:{display:false}}}}});

        // === SALARY BARS ===
        const jobs=[{n:'Management',s:160460},{n:'Computer/Math',s:126150},{n:'Healthcare Prac.',s:115850},{n:'Business/Finance',s:101770},{n:'Education',s:80050},{n:'Construction',s:79120},{n:'Protective Svc',s:66780},{n:'Sales',s:61060},{n:'Office Admin',s:55740},{n:'Production',s:51820},{n:'Transportation',s:50080},{n:'Maintenance',s:46250},{n:'Personal Care',s:44880},{n:'Healthcare Support',s:42970},{n:'Food Service',s:40280}];
        const max=160460,thresh=60080,threshPct=(thresh/max)*100;
        document.getElementById('salaryBars').innerHTML=jobs.map((j,i)=>{
            const pct=(j.s/max)*100,below=j.s<thresh;
            return`<div class="bar-item" style="animation-delay:${i*0.05}s" onclick="alert('${j.n}: $${j.s.toLocaleString()}/year\\n${below?'‚ö†Ô∏è Below':'‚úì Meets'} living wage threshold')">
                <div class="bar-head">
                    <span class="bar-label">${j.n}</span>
                    <span class="bar-val" style="color:${below?'var(--red)':'var(--green)'}">$${j.s.toLocaleString()}</span>
                </div>
                <div class="bar-track">
                    <div class="bar-fill ${below?'red':'green'}" style="--target-width:${pct}%"></div>
                    <div class="bar-threshold" style="left:${threshPct}%"></div>
                </div>
            </div>`;
        }).join('');
        
        // Initial bar animation
        setTimeout(animateBars, 500);
    </script>
</body>
</html>
